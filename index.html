<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="//unpkg.com/alpinejs" defer></script>
    <title>Exchange rate</title>
  </head>
  <body>
    <div x-data="{}">
      <div>
        <div
          class="h-full py-8 px-6 space-y-6 rounded-xl border border-gray-200 bg-white"
        >
          <div>
            <h5 class="text-xl text-gray-600 text-center">Exchange rate</h5>
            <div class="mt-2 flex justify-center gap-4">
              <h3 class="text-3xl font-bold text-gray-700">
                1$ = <span x-text="$store.data.usd"></span> ₽ /
              </h3>
              <h3 class="text-3xl font-bold text-gray-700">
                1€ = <span x-text="$store.data.eur"></span> ₽
              </h3>
            </div>
            <span class="block text-center text-gray-500">
              Compared to last week
            </span>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    async function fetchData() {
      const resp = await fetch(
        "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/rub.json"
      );
      const data = await resp.json();
      const date = data.date;
      const rub_usd = Math.round(1 / data.rub.usd);
      const rub_eur = Math.round(1 / data.rub.eur);

      document.addEventListener("alpine:init", () => {
        Alpine.store("data", {
          usd: rub_usd,
          eur: rub_eur,
        });
      });
      console.log(rub_usd);
    }
    fetchData();
  </script>
</html>
